/*! rangeslider.js - v0.3.1 | (c) 2014 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):"object"===typeof exports?d(require("jquery")):d(jQuery)})(function(d){function k(a,b){var c=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)}function l(a,b){b=b||100;return function(){if(!a.debouncing){var c=Array.prototype.slice.apply(arguments);a.lastReturnVal=a.apply(window,c);a.debouncing=!0}clearTimeout(a.debounceTimeout);a.debounceTimeout=setTimeout(function(){a.debouncing= !1},b);return a.lastReturnVal}}function e(a,b){this.$window=d(window);this.$document=d(document);this.$element=d(a);this.options=d.extend({},h,b);this._defaults=h;this._name=c;this.startEvent=this.options.startEvent.join("."+c+" ")+"."+c;this.moveEvent=this.options.moveEvent.join("."+c+" ")+"."+c;this.endEvent=this.options.endEvent.join("."+c+" ")+"."+c;this.polyfill=this.options.polyfill;this.onInit=this.options.onInit;this.onSlide=this.options.onSlide;this.onSlideEnd=this.options.onSlideEnd;if(this.polyfill&& m)return!1;this.identifier="js-"+c+"-"+ +new Date;this.min=parseFloat(this.$element[0].getAttribute("min")||0);this.max=parseFloat(this.$element[0].getAttribute("max")||100);this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2);this.step=parseFloat(this.$element[0].getAttribute("step")||1);this.$fill=d('<div class="'+this.options.fillClass+'" />');this.$handle=d('<div class="'+this.options.handleClass+'" />');this.$range=d('<div class="'+this.options.rangeClass+'" id="'+this.identifier+ '" />').insertAfter(this.$element).prepend(this.$fill,this.$handle);this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"});this.handleDown=d.proxy(this.handleDown,this);this.handleMove=d.proxy(this.handleMove,this);this.handleEnd=d.proxy(this.handleEnd,this);this.init();var e=this;this.$window.on("resize."+c,l(function(){k(function(){e.update()},300)},20));this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown); this.$element.on("change."+c,function(a,b){if(!b||b.origin!==c){var d=e.getPositionFromValue(a.target.value);e.setPosition(d)}})}var c="rangeslider",f=[],m=function(){var a=document.createElement("input");a.setAttribute("type","range");return"text"!==a.type}(),h={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"], endEvent:["mouseup","touchend","pointerup"]};e.prototype.init=function(){if(this.onInit&&"function"===typeof this.onInit)this.onInit();this.update()};e.prototype.update=function(){this.handleWidth=this.$handle[0].offsetWidth;this.rangeWidth=this.$range[0].offsetWidth;this.maxHandleX=this.rangeWidth-this.handleWidth;this.grabX=this.handleWidth/2;this.position=this.getPositionFromValue(this.value);this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass); this.setPosition(this.position)};e.prototype.handleDown=function(a){a.preventDefault();this.$document.on(this.moveEvent,this.handleMove);this.$document.on(this.endEvent,this.handleEnd);if(!(-1<(" "+a.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass))){a=this.getRelativePosition(a);var b=this.$range[0].getBoundingClientRect().left,b=this.getPositionFromNode(this.$handle[0])-b;this.setPosition(a-this.grabX);a>=b&&a<b+this.handleWidth&&(this.grabX=a-b)}};e.prototype.handleMove= function(a){a.preventDefault();a=this.getRelativePosition(a);this.setPosition(a-this.grabX)};e.prototype.handleEnd=function(a){a.preventDefault();this.$document.off(this.moveEvent,this.handleMove);this.$document.off(this.endEvent,this.handleEnd);if(this.onSlideEnd&&"function"===typeof this.onSlideEnd)this.onSlideEnd(this.position,this.value)};e.prototype.cap=function(a,b,c){return a<b?b:a>c?c:a};e.prototype.setPosition=function(a){var b;a=this.getValueFromPosition(this.cap(a,0,this.maxHandleX))/this.step* this.step;b=this.getPositionFromValue(a);this.$fill[0].style.width=b+this.grabX+"px";this.$handle[0].style.left=b+"px";this.setValue(a);this.position=b;this.value=a;if(this.onSlide&&"function"===typeof this.onSlide)this.onSlide(b,a)};e.prototype.getPositionFromNode=function(a){for(var b=0;null!==a;)b+=a.offsetLeft,a=a.offsetParent;return b};e.prototype.getRelativePosition=function(a){var b=this.$range[0].getBoundingClientRect().left;return(a.pageX||a.originalEvent.clientX||a.originalEvent.touches[0].clientX|| a.currentPoint.x)-b};e.prototype.getPositionFromValue=function(a){return(a-this.min)/(this.max-this.min)*this.maxHandleX};e.prototype.getValueFromPosition=function(a){a=this.step*Math.ceil((a/(this.maxHandleX||1)*(this.max-this.min)+this.min)/this.step);return Number(a.toFixed(2))};e.prototype.setValue=function(a){a!==this.value&&this.$element.val(a).trigger("change",{origin:c})};e.prototype.destroy=function(){this.$document.off(this.startEvent,"#"+this.identifier,this.handleDown);this.$element.off("."+ c).removeAttr("style").removeData("plugin_"+c);this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0]);f.splice(f.indexOf(this.$element[0]),1);f.length||this.$window.off("."+c)};d.fn[c]=function(a){return this.each(function(){var b=d(this),g=b.data("plugin_"+c);g||(b.data("plugin_"+c,g=new e(this,a)),f.push(this));if("string"===typeof a)g[a]()})}});